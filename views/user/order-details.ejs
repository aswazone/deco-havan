<%- include("../../views/partials/user/header") %>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f5f5f5;
            font-family: 'Lato', sans-serif;
        }

        h1 {
            color: #333;
            font-weight: bold;
        }

        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .card-title {
            font-weight: 600;
        }

        .price {
            color: #007bff;
            font-size: 1.1rem;
        }

        .card-body {
            padding: 20px;
        }

        .btn-outline-secondary {
            border-radius: 5px;
        }
    </style>
</head>

<body>
    <div class="container py-5">
        <h1 class="text-center mb-4">Order Details</h1>

        <div class="row">
            <!-- Order Items Section -->
            <div class="col-lg-8">
                <% if (order.orderItems && order.orderItems.length > 0) { %>
                    <% order.orderItems.forEach(item => { %>
                        <div class="card mb-4">
                            <div class="row g-0">
                                <div class="col-md-4">
                                    <img src="/uploads/product-images/<%= item.product.productImage[0] %>" 
                                         class="img-fluid rounded-start" 
                                         alt="<%= item.product.productName %>">
                                </div>
                                <div class="col-md-8">
                                    <div class="card-body">
                                        <h5 class="card-title"><%= item.product.productName %></h5>
                                        <p class="text-muted">Quantity: <%= item.quantity %></p>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <span class="price">Rs. <%= item.price %></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <% }); %>
                <% } else { %>
                    <div class="alert alert-info text-center">
                        No items found in this order.
                    </div>
                <% } %>
            </div>

            <!-- Shipping Address Section -->
            <div class="col-lg-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Shipping Address</h5>
                        <hr>
                        <p><strong>Name:</strong> <%= address.name %></p>
                        <p><strong>City:</strong> <%= address.city %></p>
                        <p><strong>State:</strong> <%= address.state %></p>
                        <p><strong>Landmark:</strong> <%= address.landMark %></p>
                        <p><strong>Pincode:</strong> <%= address.pincode %></p>
                        <p><strong>Phone:</strong> <%= address.phone %></p>
                        <p><strong>Alt Phone:</strong> <%= address.altPhone %></p>
                        <hr>
                        <h5 class="card-title">Order Summary</h5>
                        <p><strong>Order ID:</strong> <%= order.orderId %></p>
                        <p><strong>Invoice Date:</strong> <%= order.invoiceDate ? order.invoiceDate.toDateString() : 'N/A' %></p>
                        <p><strong>Status:</strong> <%= order.status %></p>
                        <p><strong>Subtotal:</strong> Rs. <%= order.totalPrice %></p>
                        <p><strong>Discount:</strong> Rs. <%= order.discount %></p>
                        <p><strong>Final Amount:</strong> Rs. <%= order.finalAmount %></p>
                        <p><strong>Payment Method:</strong> <%= order.paymentMethod %></p>
                    </div>
                </div>
            </div>
        </div>

        <a href="/" class="btn btn-outline-secondary mt-4">Back to Orders</a>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

<%- include("../../views/partials/user/footer") %>
